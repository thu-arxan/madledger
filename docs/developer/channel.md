# 通道

## 1. 系统通道

其中系统通道开头为下划线"_"，然后后面是小写字母和数字组成的通道名。目前，系统通道有下面几种。

- _global: 负责全局排序。
- _config: 存储各个通道的配置信息。
- _asset: 存储金额信息。

### 1.1. config

配置通道存储了各个通道的配置信息。

#### 1.1.1. profile

通道配置包含以下配置信息。

- Public: 是否公共通道，如果是公共通道则无访问限制，否则需要是通道成员。
- Dependencies: 依赖通道。为了多链调用的正确性和加强性能，设置该信息以使得更好的并行化。
- Members: 通道成员，如果是公共通道，则该属性无效。
- Admins: 管理成员，目前没有进一步的权限划分。在公共通道和私有通道均生效，但是若是私有通道，管理成员一定是通道成员的子集。

## 2. 应用通道

而应用通道则是小写字母或者数字组成的通道名，其可简要表示为如下所示。

```go
[a-z0-9]{1, 32}
```

## 3. 设计

通道的目的是为了实现良好的隔离环境，这样一个专注于医药业务的通道就不需要关心一个专注于游戏的通道的交易信息，同时新建一个通道也不需要同步别的通道的交易数据，这样可以快速的启动一个通道并开始服务。但是，一切都不是完美的，想要达到正确的设计需要做一些妥协。

### 3.1. 局限

如果将一个通道看做是完全独立的个体，那么就会存在一些问题。

- 计费困难。因为一个账户可能会活跃于多个通道，那么如果没有合适的法则来处理这一问题，则难以使得各个Peer节点执行确定性。
- 配置信息不一致。由于所有的配置信息都存在于_config通道中，但是不同的Peer和Orderer可能获取配置信息的先后不同，所以可能存在一些不一致的问题。
- 跨链调用。跨链调用时如果没有一个全局顺序，则可能导致不同Peer节点结果不一致甚至出现死锁。

因此，需要_global的存在以进行全局排序以使得存在确定的单线程的执行顺序以使得不同节点得到相同的执行结果。但是，这也会不利于不同通道并发执行。

### 3.2. 适度并发

很多时候，一个通道不依赖或者只依赖于很少的其它通道，因此其执行并不依赖于大多数其它通道的执行，因此只需要其依赖被执行即可完成执行。所以，通过Dependencies可以帮助通道进行正确的并发。不过这一功能还处于设想当中。
但是，需要注意的是，系统通道目前是所有通道都依赖的。